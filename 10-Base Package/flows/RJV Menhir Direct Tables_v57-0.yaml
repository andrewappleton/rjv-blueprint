inboundCall:
  name: RJV Menhir Direct Tables
  division: "{{var_division}}"
  startUpRef: "/inboundCall/tasks/task[B01 Base Flow_15]"
  defaultLanguage: nl-nl
  supportedLanguages:
    de-de:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        Genesys Enhanced TTS:
          voice: de-DE-Standard-A
    en-gb:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        Genesys Enhanced TTS:
          voice: en-GB-Standard-A
    en-us:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        Genesys Enhanced TTS:
          voice: en-US-Standard-A
    fr-fr:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        Genesys Enhanced TTS:
          voice: fr-FR-Standard-A
    nl-nl:
      defaultLanguageSkill:
        noValue: true
      textToSpeech:
        Genesys Enhanced TTS:
          voice: nl-NL-Standard-A
  initialGreeting:
    exp: AudioPlaybackOptions(ToAudioBlank(100), true)
  variables:
    - integerVariable:
        name: Flow.ACD_Priority
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.AgentsOnQueueCount
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.AgentsOnQueueTxt
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.CallbackEwtThreshold
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.CalledDNIS
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.CallerANI
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.CountryCode
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.CountryCodeDNIS
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.CustomerJourney
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Default_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Dest_Default
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationClosed
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationEmergency
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationHoliday
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationName
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationNameError
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DestinationNotActive
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DTID_Routing_Prompts
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.DTID_Routing_Queueing
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.EmergencyGroup
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.FirstDestination
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.FlowLanguage
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.InQueueName
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.IVRChoice
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.LangMenuTimeout
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.LangRepeats
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.LanguageDefault
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.LanguageSkill
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.LAR
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.LAR_Threshold
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.LARFound
        initialValue:
          noValue: true
    - stringCollectionVariable:
        name: Flow.LARList
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.LB_Randomizer
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.LoadBalanceDestination
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.LoadBalancePercentage
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.MenuDestination
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.MobileNumberChecked
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestination
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguage
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageDefault
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt1
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt3
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt4
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt5
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NextDestinationLanguageOpt9
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.NoAgentsOnQueue_Destination
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.NumberActive
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.OfferCallback
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option0
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option1
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option1_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option2_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option3
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option3_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option4
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option4_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option5
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option5_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option6
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option7
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option8
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option9
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Option9_LangSkill
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.OptionDefault
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.OptionHash
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.OptionStar
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.Priority
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.PriorityDNIS
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Prompt_Postfix
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Prompt2Search
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.PromptLangMenu
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.PromptMenu
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.QueueName
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.QueueNameCheckOnQueue
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Dest
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Entry
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang1
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang3
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang4
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang5
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Lang9
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_LangMenu
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Menu
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt0
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt1
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt3
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt4
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt5
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt6
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt7
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt8
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_Opt9
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_OptHash
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_OptStar
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Rap_SpecDest
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Rec_Consent
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Recorded
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Recording_OptOut
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.RecordingActive
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.Repeats
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Schedule
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.ScheduleGroup
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.ScheduleRap_Entry
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Script
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.ScriptDisplayText
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.ScriptDisplayText2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Skill_1
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Skill_2
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.SkillLine
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Survey
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Survey_Consent
        initialValue:
          noValue: true
    - booleanVariable:
        name: Flow.Survey_OptOut
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.SurveyFlowName
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.TablesCountryCode
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.TablesDivision
        initialValue:
          noValue: true
    - integerVariable:
        name: Flow.Timeout
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Transfer_ExternalNumber
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.Transfer_FlowName
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.WhisperLanguage
        initialValue:
          noValue: true
    - stringVariable:
        name: Flow.WhisperText
        initialValue:
          noValue: true
  settingsActionDefaults:
    playAudioOnSilence:
      timeout:
        lit:
          seconds: 40
    detectSilence:
      timeout:
        lit:
          seconds: 40
    callData:
      processingPrompt:
        noValue: true
    collectInput:
      noEntryTimeout:
        lit:
          seconds: 5
    dialByExtension:
      interDigitTimeout:
        lit:
          seconds: 6
    transferToUser:
      connectTimeout:
        noValue: true
    transferToNumber:
      connectTimeout:
        noValue: true
    transferToGroup:
      connectTimeout:
        noValue: true
    transferToFlowSecure:
      connectTimeout:
        lit:
          seconds: 15
  settingsErrorHandling:
    errorHandling:
      disconnect:
        none: true
    preHandlingAudio:
      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
  settingsMenu:
    extensionDialingMaxDelay:
      lit:
        seconds: 1
    listenForExtensionDialing:
      lit: true
    menuSelectionTimeout:
      lit:
        seconds: 10
    repeatCount:
      lit: 3
  settingsPrompts:
    ensureAudioInPrompts: false
    promptMediaToValidate:
      - mediaType: audio
      - mediaType: tts
  settingsSpeechRec:
    completeMatchTimeout:
      lit:
        ms: 100
    incompleteMatchTimeout:
      lit:
        ms: 1500
    maxSpeechLengthTimeout:
      lit:
        seconds: 20
    minConfidenceLevel:
      lit: 50
    asrCompanyDir: none
    asrEnabledOnFlow: true
    suppressRecording: false
  tasks:
    - task:
        name: 00 Set Tables Division
        refId: 00 Set Tables Division_1801
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 00 Set Tables Division
          - decision:
              name: Decision
              condition:
                exp: ToString(ToPhoneNumber(Call.CalledAddressOriginal).dialingCode) == "1"
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.TablesCountryCode
                              value:
                                exp: "ToString(ToPhoneNumber(Call.CalledAddressOriginal).dialingCode) + \nToString(Left(ToPhoneNumber(Call.CalledAddressOriginal).subscriberNumber,3))"
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.TablesCountryCode
                              value:
                                exp: ToString(ToPhoneNumber(Call.CalledAddressOriginal).dialingCode)
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: TablesCountryCode
                    value:
                      exp: Flow.TablesCountryCode
          - dataTableLookup:
              name: Data Table Lookup
              lookupValue:
                exp: Flow.TablesCountryCode
              dataTable:
                RJV_Global_TablesDivision:
                  foundOutputs:
                    Division:
                      var: Flow.TablesDivision
                  failureOutputs:
                    errorType:
                      noValue: true
                    errorMessage:
                      noValue: true
              outputs:
                found:
                  actions:
                    - setParticipantData:
                        name: Set Participant Data
                        attributes:
                          - attribute:
                              name:
                                lit: TablesDivision
                              value:
                                exp: Flow.TablesDivision
                    - endTask:
                        name: End Task
                        outputPath:
                          name: default
                notFound:
                  actions:
                    - setParticipantData:
                        name: Set Participant Data
                        attributes:
                          - attribute:
                              name:
                                lit: ERROR_Disconnect
                              value:
                                exp: "\"Data Table Global_TablesDivision- Entry not found: \" + Flow.CalledDNIS"
                failure:
                  actions:
                    - setParticipantData:
                        name: Set Participant Data
                        attributes:
                          - attribute:
                              name:
                                lit: ERROR_Disconnect
                              value:
                                exp: "\"Data Table Global_TablesDivision - Failure\""
          - disconnect:
              name: Disconnect
    - task:
        name: 01 Initialisation
        refId: 01 Initialisation_12
        actions:
          - getParticipantData:
              name: Get Participant Data
              attributes:
                - attribute:
                    name:
                      lit: CustomerJourney
                    variable: Flow.CustomerJourney
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Flow.CustomerJourney)
              outputs:
                "yes":
                  actions:
                    - callCommonModule:
                        name: Call Common Module
                        commonModule:
                          RJV Customer Journey:
                            ver_latestPublished:
                              inputs:
                                Common.CustomerJourneyUpdateString:
                                  exp: "\"Start Journey\""
                                Common.CustomerJourney:
                                  exp: Flow.CustomerJourney
                              outputs:
                                Common.CustomerJourneyOutput:
                                  var: Flow.CustomerJourney
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.CalledDNIS
                    value:
                      exp: Call.CalledAddressOriginal
                - string:
                    variable: Flow.MobileNumberChecked
                    value:
                      lit: ToCheck
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.CallerANI
                    value:
                      exp: "\"+\" + Trim(Substring(Call.Ani,5,35))"
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.CountryCode
                    value:
                      exp: ToString(ToPhoneNumber(Flow.CallerANI).dialingCode)
                - string:
                    variable: Flow.CountryCodeDNIS
                    value:
                      exp: ToString(ToPhoneNumber(Call.CalledAddressOriginal).dialingCode)
          - updateData:
              name: Boolean defaults
              statements:
                - boolean:
                    variable: Flow.RecordingActive
                    value:
                      lit: false
                - boolean:
                    variable: Flow.Rec_Consent
                    value:
                      lit: false
                - boolean:
                    variable: Flow.LAR
                    value:
                      lit: false
                - boolean:
                    variable: Flow.Survey
                    value:
                      lit: false
                - boolean:
                    variable: Flow.OfferCallback
                    value:
                      lit: false
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 01 Initialisation
                - attribute:
                    name:
                      lit: CountryCode
                    value:
                      exp: Flow.CountryCode
                - attribute:
                    name:
                      lit: DTID_Routing_Prompts
                    value:
                      exp: Flow.DTID_Routing_Prompts
                - attribute:
                    name:
                      lit: DTID_Routing_Queueing
                    value:
                      exp: Flow.DTID_Routing_Queueing
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[D01 DNIS_1701]"
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: Flow.Rap_Entry
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV SetLanguage:
                  ver_latestPublished:
                    inputs:
                      Common.LanguageInput:
                        exp: Flow.LanguageDefault
                    outputs:
                      Common.LanguageSkill:
                        noValue: true
                      Common.StockCountry:
                        noValue: true
                      Common.WhisperLanguage:
                        var: Flow.WhisperLanguage
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Flow.PriorityDNIS)
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - integer:
                              variable: Flow.PriorityDNIS
                              value:
                                lit: 0
          - updateData:
              name: Update Data
              statements:
                - integer:
                    variable: Flow.Priority
                    value:
                      exp: Flow.PriorityDNIS
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.DestinationName
                    value:
                      exp: Flow.FirstDestination
                - string:
                    variable: Flow.FlowLanguage
                    value:
                      exp: Flow.LanguageDefault
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 02 Number Active Check
        refId: 02 Number Active Check_1382
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 02 Number Active Check
          - decision:
              name: Decision
              condition:
                exp: Flow.NumberActive
              outputs:
                "yes":
                  actions:
                    - endTask:
                        name: End Task
                        outputPath:
                          name: default
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.DestinationName
                    value:
                      exp: Flow.DestinationNotActive
          - jumpToTask:
              name: Jump to Reusable Task
              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: 03 Language Selection
        refId: 03 Language Selection_763
        variables:
          - stringVariable:
              name: Task.CJ_Text_LangMenu
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - booleanVariable:
              name: Task.InputFailure
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - integerVariable:
              name: Task.MenuLoops
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - stringVariable:
              name: Task.Temp_Language
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 03 Language Selection
          - decision:
              name: Decision
              condition:
                exp: Lower(Left(Flow.DestinationName, 4)) == "lang"
              outputs:
                "yes":
                  actions:
                    - callTask:
                        name: Call Task
                        targetTaskRef: "/inboundCall/tasks/task[D02 Language_1705]"
                    - loop:
                        name: Loop
                        currentIndex:
                          var: Task.MenuLoops
                        loopCount:
                          exp: Flow.LangRepeats + 1
                        outputs:
                          loop:
                            actions:
                              - callTask:
                                  name: Get Global TTS
                                  targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                  taskInputs:
                                    - string:
                                        name: Task.SystemPrompt
                                        value:
                                          exp: Flow.PromptLangMenu
                                    - boolean:
                                        name: Task.SystemAudio
                                        value:
                                          lit: true
                              - switch:
                                  name: Switch
                                  evaluate:
                                    firstTrue:
                                      default:
                                        actions:
                                          - collectInput:
                                              name: Collect Input
                                              inputData:
                                                var: Flow.IVRChoice
                                              digits:
                                                exact: 1
                                              interDigitTimeout:
                                                noValue: true
                                              noEntryTimeout:
                                                lit:
                                                  seconds: 5
                                              inputAudio:
                                                exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                              acceptJustStar:
                                                lit: true
                                              acceptJustPound:
                                                lit: true
                                              verificationType: none
                                              outputs:
                                                success:
                                                  actions:
                                                    - updateData:
                                                        name: Update Data
                                                        statements:
                                                          - boolean:
                                                              variable: Task.InputFailure
                                                              value:
                                                                lit: false
                                                failure:
                                                  actions:
                                                    - updateData:
                                                        name: Update Data
                                                        statements:
                                                          - boolean:
                                                              variable: Task.InputFailure
                                                              value:
                                                                lit: true
                                      cases:
                                        - case:
                                            value:
                                              exp: Flow.LangMenuTimeout == 2
                                            actions:
                                              - collectInput:
                                                  name: Collect Input
                                                  inputData:
                                                    var: Flow.IVRChoice
                                                  digits:
                                                    exact: 1
                                                  interDigitTimeout:
                                                    noValue: true
                                                  noEntryTimeout:
                                                    lit:
                                                      seconds: 2
                                                  inputAudio:
                                                    exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                                  acceptJustStar:
                                                    lit: true
                                                  acceptJustPound:
                                                    lit: true
                                                  verificationType: none
                                                  outputs:
                                                    success:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: false
                                                    failure:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: true
                                        - case:
                                            value:
                                              exp: Flow.LangMenuTimeout == 5
                                            actions:
                                              - collectInput:
                                                  name: Collect Input
                                                  inputData:
                                                    var: Flow.IVRChoice
                                                  digits:
                                                    exact: 1
                                                  interDigitTimeout:
                                                    noValue: true
                                                  noEntryTimeout:
                                                    lit:
                                                      seconds: 5
                                                  inputAudio:
                                                    exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                                  acceptJustStar:
                                                    lit: true
                                                  acceptJustPound:
                                                    lit: true
                                                  verificationType: none
                                                  outputs:
                                                    success:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: false
                                                    failure:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: true
                                        - case:
                                            value:
                                              exp: Flow.LangMenuTimeout == 8
                                            actions:
                                              - collectInput:
                                                  name: Collect Input
                                                  inputData:
                                                    var: Flow.IVRChoice
                                                  digits:
                                                    exact: 1
                                                  interDigitTimeout:
                                                    noValue: true
                                                  noEntryTimeout:
                                                    lit:
                                                      seconds: 8
                                                  inputAudio:
                                                    exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                                  acceptJustStar:
                                                    lit: true
                                                  acceptJustPound:
                                                    lit: true
                                                  verificationType: none
                                                  outputs:
                                                    success:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: false
                                                    failure:
                                                      actions:
                                                        - updateData:
                                                            name: Update Data
                                                            statements:
                                                              - boolean:
                                                                  variable: Task.InputFailure
                                                                  value:
                                                                    lit: true
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: Task.InputFailure
                                  outputs:
                                    "yes":
                                      actions:
                                        - decision:
                                            name: Decision
                                            condition:
                                              exp: Flow.LangRepeats == 0
                                            outputs:
                                              "no":
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.MenuLoops < Flow.LangRepeats
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - decision:
                                                                name: Decision
                                                                condition:
                                                                  exp: Task.MenuLoops == Flow.LangRepeats
                                                                outputs:
                                                                  "yes":
                                                                    actions:
                                                                      - callTask:
                                                                          name: Get Global TTS
                                                                          targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                                          taskInputs:
                                                                            - string:
                                                                                name: Task.SystemPrompt
                                                                                value:
                                                                                  lit: Menu_MaxTries
                                                                            - boolean:
                                                                                name: Task.SystemAudio
                                                                                value:
                                                                                  lit: true
                                                                      - updateData:
                                                                          name: Update Data
                                                                          statements:
                                                                            - string:
                                                                                variable: Flow.FlowLanguage
                                                                                value:
                                                                                  exp: Flow.OptionDefault
                                                                            - string:
                                                                                variable: Flow.LanguageSkill
                                                                                value:
                                                                                  exp: Flow.Default_LangSkill
                                                                            - string:
                                                                                variable: Flow.NextDestinationLanguage
                                                                                value:
                                                                                  exp: Flow.NextDestinationLanguageDefault
                                                                      - loopExit:
                                                                          name: Exit Loop
                                                                  "no":
                                                                    actions:
                                                                      - callTask:
                                                                          name: Get Global TTS
                                                                          targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                                          taskInputs:
                                                                            - string:
                                                                                name: Task.SystemPrompt
                                                                                value:
                                                                                  lit: Menu_EntryNotValid
                                                                            - boolean:
                                                                                name: Task.SystemAudio
                                                                                value:
                                                                                  lit: true
                                                                      - loopNext:
                                                                          name: Next Loop
                                                        "no":
                                                          actions:
                                                            - callTask:
                                                                name: Get Global TTS
                                                                targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                                taskInputs:
                                                                  - string:
                                                                      name: Task.SystemPrompt
                                                                      value:
                                                                        lit: Menu_MaxTries
                                                                  - boolean:
                                                                      name: Task.SystemAudio
                                                                      value:
                                                                        lit: true
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - string:
                                                                      variable: Flow.FlowLanguage
                                                                      value:
                                                                        exp: Flow.OptionDefault
                                                                  - string:
                                                                      variable: Flow.LanguageSkill
                                                                      value:
                                                                        exp: Flow.Default_LangSkill
                                                                  - string:
                                                                      variable: Flow.NextDestinationLanguage
                                                                      value:
                                                                        exp: Flow.NextDestinationLanguageDefault
                                                            - loopExit:
                                                                name: Exit Loop
                              - switch:
                                  name: Switch
                                  evaluate:
                                    firstTrue:
                                      default:
                                        actions:
                                          - updateData:
                                              name: Update Data
                                              statements:
                                                - string:
                                                    variable: Task.Temp_Language
                                                    value:
                                                      exp: Flow.OptionDefault
                                                - string:
                                                    variable: Flow.LanguageSkill
                                                    value:
                                                      exp: Flow.Default_LangSkill
                                                - string:
                                                    variable: Flow.NextDestinationLanguage
                                                    value:
                                                      exp: Flow.NextDestinationLanguageDefault
                                          - updateData:
                                              name: Update Data
                                              statements:
                                                - string:
                                                    variable: Task.CJ_Text_LangMenu
                                                    value:
                                                      exp: "Flow.Rap_LangMenu + \">D~Default\" "
                                      cases:
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "1"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option1
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option1_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt1
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">1~" + Flow.Rap_Lang1
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "2"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option2
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option2_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt2
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">2~" + Flow.Rap_Lang2
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "3"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option3
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option3_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt3
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">3~" + Flow.Rap_Lang3
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "4"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option4
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option4_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt4
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">4~" + Flow.Rap_Lang4
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "5"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option5
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option5_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt5
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">5~" + Flow.Rap_Lang5
                                        - case:
                                            value:
                                              exp: Flow.IVRChoice == "9"
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.Temp_Language
                                                        value:
                                                          exp: Flow.Option9
                                                    - string:
                                                        variable: Flow.LanguageSkill
                                                        value:
                                                          exp: Flow.Option9_LangSkill
                                                    - string:
                                                        variable: Flow.NextDestinationLanguage
                                                        value:
                                                          exp: Flow.NextDestinationLanguageOpt9
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - string:
                                                        variable: Task.CJ_Text_LangMenu
                                                        value:
                                                          exp: Flow.Rap_LangMenu + ">9~" + Flow.Rap_Lang9
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: IsNotSetOrEmpty(Flow.NextDestinationLanguage)
                                  outputs:
                                    "yes":
                                      actions:
                                        - updateData:
                                            name: Update Data
                                            statements:
                                              - string:
                                                  variable: Flow.NextDestinationLanguage
                                                  value:
                                                    exp: Flow.NextDestinationLanguageDefault
                              - callCommonModule:
                                  name: Call Common Module
                                  commonModule:
                                    RJV Customer Journey:
                                      ver_latestPublished:
                                        inputs:
                                          Common.CustomerJourneyUpdateString:
                                            exp: Task.CJ_Text_LangMenu
                                          Common.CustomerJourney:
                                            exp: Flow.CustomerJourney
                                        outputs:
                                          Common.CustomerJourneyOutput:
                                            var: Flow.CustomerJourney
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: IsNotSetOrEmpty(Task.Temp_Language)
                                  outputs:
                                    "yes":
                                      actions:
                                        - decision:
                                            name: Decision
                                            condition:
                                              exp: Task.MenuLoops < Flow.LangRepeats
                                            outputs:
                                              "yes":
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.MenuLoops == Flow.LangRepeats
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - callTask:
                                                                name: Get Global TTS
                                                                targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                                taskInputs:
                                                                  - string:
                                                                      name: Task.SystemPrompt
                                                                      value:
                                                                        lit: Menu_MaxTries
                                                                  - boolean:
                                                                      name: Task.SystemAudio
                                                                      value:
                                                                        lit: true
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - string:
                                                                      variable: Flow.FlowLanguage
                                                                      value:
                                                                        exp: Flow.OptionDefault
                                                                  - string:
                                                                      variable: Flow.LanguageSkill
                                                                      value:
                                                                        exp: Flow.Default_LangSkill
                                                                  - string:
                                                                      variable: Flow.NextDestinationLanguage
                                                                      value:
                                                                        exp: Flow.NextDestinationLanguageDefault
                                                            - loopExit:
                                                                name: Exit Loop
                                                        "no":
                                                          actions:
                                                            - callTask:
                                                                name: Get Global TTS
                                                                targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                                taskInputs:
                                                                  - string:
                                                                      name: Task.SystemPrompt
                                                                      value:
                                                                        lit: Menu_EntryNotValid
                                                                  - boolean:
                                                                      name: Task.SystemAudio
                                                                      value:
                                                                        lit: true
                                                            - loopNext:
                                                                name: Next Loop
                                              "no":
                                                actions:
                                                  - callTask:
                                                      name: Get Global TTS
                                                      targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                      taskInputs:
                                                        - string:
                                                            name: Task.SystemPrompt
                                                            value:
                                                              lit: Menu_MaxTries
                                                        - boolean:
                                                            name: Task.SystemAudio
                                                            value:
                                                              lit: true
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - string:
                                                            variable: Flow.FlowLanguage
                                                            value:
                                                              exp: Flow.OptionDefault
                                                        - string:
                                                            variable: Flow.LanguageSkill
                                                            value:
                                                              exp: Flow.Default_LangSkill
                                                        - string:
                                                            variable: Flow.NextDestinationLanguage
                                                            value:
                                                              exp: Flow.NextDestinationLanguageDefault
                                                  - loopExit:
                                                      name: Exit Loop
                                    "no":
                                      actions:
                                        - updateData:
                                            name: Update Data
                                            statements:
                                              - string:
                                                  variable: Flow.FlowLanguage
                                                  value:
                                                    exp: Task.Temp_Language
                                        - loopExit:
                                            name: Exit Loop
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.NextDestinationLanguage
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.FlowLanguage
                              value:
                                exp: Flow.LanguageDefault
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.DestinationNameError
                    value:
                      exp: Flow.DestinationName
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: FlowLanguage
                    value:
                      exp: Flow.FlowLanguage
                - attribute:
                    name:
                      lit: Survey_Lang
                    value:
                      exp: Upper(Left(Flow.FlowLanguage, 2))
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV SetLanguage:
                  ver_latestPublished:
                    inputs:
                      Common.LanguageInput:
                        exp: Flow.FlowLanguage
                    outputs:
                      Common.LanguageSkill:
                        noValue: true
                      Common.StockCountry:
                        noValue: true
                      Common.WhisperLanguage:
                        var: Flow.WhisperLanguage
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 04 Open Hours
        refId: 04 Open Hours_68
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 04 Open Hours
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[D03 Scheduling_1712]"
          - evaluateScheduleGroup:
              name: Evaluate Schedule Group
              inServiceSchedules:
                noValue: true
              evaluate:
                now: true
              scheduleGroup:
                exp: FindScheduleGroup(Flow.ScheduleGroup)
              emergencyGroup:
                exp: FindEmergencyGroup(Flow.EmergencyGroup)
              outputs:
                open:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Schedule
                              value:
                                lit: Open
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.NextDestination
                closed:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Schedule
                              value:
                                lit: Closed
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.DestinationClosed
                holiday:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Schedule
                              value:
                                lit: Holiday
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.DestinationHoliday
                emergency:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Schedule
                              value:
                                lit: Emergency
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.DestinationEmergency
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: "\"Scheduling>\"+Flow.Schedule"
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - jumpToTask:
              name: Jump to Reusable Task
              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: 20 Destination
        refId: 20 Destination_52
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 20 Destination
                - attribute:
                    name:
                      lit: Last_Destination
                    value:
                      exp: Flow.DestinationName
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - jumpToTask:
                          name: Jump to Reusable Task
                          targetTaskRef: "/inboundCall/tasks/task[C00 Special Destinations_657]"
                  cases:
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "menu"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[30 Menu_109]"
                              outputs:
                                default:
                                  actions:
                                    - jumpToTask:
                                        name: Jump to Reusable Task
                                        targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "dest"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[50 Distribution_99]"
                          - setParticipantData:
                              name: Set Participant Data
                              attributes:
                                - attribute:
                                    name:
                                      lit: Dest_InQueue
                                    value:
                                      exp: Flow.DestinationName
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[60 Recording_497]"
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[61 Survey_1121]"
                          - decision:
                              name: Decision
                              condition:
                                exp: Flow.Recorded
                              outputs:
                                "yes":
                                  actions:
                                    - enableParticipantRecord:
                                        name: Enable Participant Recording
                                "no":
                                  actions:
                                    - callCommonModule:
                                        name: Call Common Module
                                        commonModule:
                                          RJV Customer Journey:
                                            ver_latestPublished:
                                              inputs:
                                                Common.CustomerJourneyUpdateString:
                                                  exp: "\"Recording>2~No\""
                                                Common.CustomerJourney:
                                                  exp: Flow.CustomerJourney
                                              outputs:
                                                Common.CustomerJourneyOutput:
                                                  var: Flow.CustomerJourney
                          - jumpToTask:
                              name: Jump to Reusable Task
                              targetTaskRef: "/inboundCall/tasks/task[98 GetQueueAndScriptData_506]"
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "sche"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[04 Open Hours_68]"
                          - jumpToTask:
                              name: Jump to Reusable Task
                              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "prom"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                              taskInputs:
                                - boolean:
                                    name: Task.SystemAudio
                                    value:
                                      lit: false
                                - string:
                                    name: Task.SystemPrompt
                                    value:
                                      exp: Flow.DestinationName
                          - jumpToTask:
                              name: Jump to Reusable Task
                              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "lang"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[03 Language Selection_763]"
                          - setParticipantData:
                              name: Set Participant Data
                              attributes:
                                - attribute:
                                    name:
                                      lit: Survey_Lang
                                    value:
                                      exp: Upper(Left(Flow.FlowLanguage, 2))
                          - jumpToTask:
                              name: Jump to Reusable Task
                              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: 30 Menu
        refId: 30 Menu_109
        variables:
          - stringVariable:
              name: Task.CJ_Text_Menu
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - booleanVariable:
              name: Task.IVRChoiceSuccess
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - integerVariable:
              name: Task.MenuLoops
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - stringVariable:
              name: Task.Temp_MenuDestination
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 30 Menu
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[D04 Menu_1727]"
          - loop:
              name: Loop
              currentIndex:
                var: Task.MenuLoops
              loopCount:
                exp: Flow.Repeats + 1
              outputs:
                loop:
                  actions:
                    - callTask:
                        name: Get Global TTS
                        targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                        taskInputs:
                          - string:
                              name: Task.SystemPrompt
                              value:
                                exp: Flow.PromptMenu
                          - boolean:
                              name: Task.SystemAudio
                              value:
                                lit: true
                    - switch:
                        name: Switch
                        evaluate:
                          firstTrue:
                            default:
                              actions:
                                - collectInput:
                                    name: Collect Input
                                    inputData:
                                      var: Flow.IVRChoice
                                    digits:
                                      exact: 1
                                    interDigitTimeout:
                                      noValue: true
                                    noEntryTimeout:
                                      lit:
                                        seconds: 5
                                    inputAudio:
                                      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                    acceptJustStar:
                                      lit: true
                                    acceptJustPound:
                                      lit: true
                                    verificationType: none
                                    outputs:
                                      success:
                                        actions:
                                          - updateData:
                                              name: Update Data
                                              statements:
                                                - boolean:
                                                    variable: Task.IVRChoiceSuccess
                                                    value:
                                                      lit: true
                                      failure:
                                        actions:
                                          - updateData:
                                              name: Update Data
                                              statements:
                                                - boolean:
                                                    variable: Task.IVRChoiceSuccess
                                                    value:
                                                      lit: false
                            cases:
                              - case:
                                  value:
                                    exp: Flow.Timeout == 2
                                  actions:
                                    - collectInput:
                                        name: Collect Input
                                        inputData:
                                          var: Flow.IVRChoice
                                        digits:
                                          exact: 1
                                        interDigitTimeout:
                                          noValue: true
                                        noEntryTimeout:
                                          lit:
                                            seconds: 2
                                        inputAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        acceptJustStar:
                                          lit: true
                                        acceptJustPound:
                                          lit: true
                                        verificationType: none
                                        outputs:
                                          success:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: true
                                          failure:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: false
                              - case:
                                  value:
                                    exp: Flow.Timeout == 5
                                  actions:
                                    - collectInput:
                                        name: Collect Input
                                        inputData:
                                          var: Flow.IVRChoice
                                        digits:
                                          exact: 1
                                        interDigitTimeout:
                                          noValue: true
                                        noEntryTimeout:
                                          lit:
                                            seconds: 5
                                        inputAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        acceptJustStar:
                                          lit: true
                                        acceptJustPound:
                                          lit: true
                                        verificationType: none
                                        outputs:
                                          success:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: true
                                          failure:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: false
                              - case:
                                  value:
                                    exp: Flow.Timeout == 8
                                  actions:
                                    - collectInput:
                                        name: Collect Input
                                        inputData:
                                          var: Flow.IVRChoice
                                        digits:
                                          exact: 1
                                        interDigitTimeout:
                                          noValue: true
                                        noEntryTimeout:
                                          lit:
                                            seconds: 8
                                        inputAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        acceptJustStar:
                                          lit: true
                                        acceptJustPound:
                                          lit: true
                                        verificationType: none
                                        outputs:
                                          success:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: true
                                          failure:
                                            actions:
                                              - updateData:
                                                  name: Update Data
                                                  statements:
                                                    - boolean:
                                                        variable: Task.IVRChoiceSuccess
                                                        value:
                                                          lit: false
                    - decision:
                        name: Decision
                        condition:
                          exp: Task.IVRChoiceSuccess
                        outputs:
                          "no":
                            actions:
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: Task.MenuLoops < Flow.Repeats
                                  outputs:
                                    "yes":
                                      actions:
                                        - decision:
                                            name: Decision
                                            condition:
                                              exp: Task.MenuLoops == Flow.Repeats + 1
                                            outputs:
                                              "yes":
                                                actions:
                                                  - callTask:
                                                      name: Get Global TTS
                                                      targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                      taskInputs:
                                                        - string:
                                                            name: Task.SystemPrompt
                                                            value:
                                                              lit: Menu_MaxTries
                                                        - boolean:
                                                            name: Task.SystemAudio
                                                            value:
                                                              lit: true
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - string:
                                                            variable: Flow.MenuDestination
                                                            value:
                                                              exp: Flow.OptionDefault
                                                  - loopExit:
                                                      name: Exit Loop
                                              "no":
                                                actions:
                                                  - callTask:
                                                      name: Play Prompt
                                                      targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                      taskInputs:
                                                        - string:
                                                            name: Task.SystemPrompt
                                                            value:
                                                              lit: Menu_EntryNotValid
                                                        - boolean:
                                                            name: Task.SystemAudio
                                                            value:
                                                              lit: true
                                                  - loopNext:
                                                      name: Next Loop
                                    "no":
                                      actions:
                                        - updateData:
                                            name: Update Data
                                            statements:
                                              - string:
                                                  variable: Flow.MenuDestination
                                                  value:
                                                    exp: Flow.OptionDefault
                                        - loopExit:
                                            name: Exit Loop
                    - switch:
                        name: Switch
                        evaluate:
                          firstTrue:
                            default:
                              actions:
                                - updateData:
                                    name: Update Data
                                    statements:
                                      - string:
                                          variable: Task.Temp_MenuDestination
                                          value:
                                            exp: Flow.OptionDefault
                                - updateData:
                                    name: Update Data
                                    statements:
                                      - string:
                                          variable: Task.CJ_Text_Menu
                                          value:
                                            exp: "Flow.Rap_Menu + \">D~Default\" "
                            cases:
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "1"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option1
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">1~" + Flow.Rap_Opt1
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "2"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option2
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">2~" + Flow.Rap_Opt2
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "3"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option3
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">3~" + Flow.Rap_Opt3
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "4"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option4
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">4~" + Flow.Rap_Opt4
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "5"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option5
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">5~" + Flow.Rap_Opt5
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "6"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option6
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">6~" + Flow.Rap_Opt6
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "7"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option7
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">7~" + Flow.Rap_Opt7
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "8"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option8
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">8~" + Flow.Rap_Opt8
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "9"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option9
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">9~" + Flow.Rap_Opt9
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "0"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.Option0
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">0~" + Flow.Rap_Opt0
                              - case:
                                  value:
                                    exp: "Flow.IVRChoice == \"#\""
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.OptionHash
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: "Flow.Rap_Menu + \">#~\" + Flow.Rap_OptHash"
                              - case:
                                  value:
                                    exp: Flow.IVRChoice == "*"
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.Temp_MenuDestination
                                              value:
                                                exp: Flow.OptionStar
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Task.CJ_Text_Menu
                                              value:
                                                exp: Flow.Rap_Menu + ">*~" + Flow.Rap_OptStar
                    - callCommonModule:
                        name: Call Common Module
                        commonModule:
                          RJV Customer Journey:
                            ver_latestPublished:
                              inputs:
                                Common.CustomerJourneyUpdateString:
                                  exp: Task.CJ_Text_Menu
                                Common.CustomerJourney:
                                  exp: Flow.CustomerJourney
                              outputs:
                                Common.CustomerJourneyOutput:
                                  var: Flow.CustomerJourney
                    - decision:
                        name: Decision
                        condition:
                          exp: IsNotSetOrEmpty(Task.Temp_MenuDestination)
                        outputs:
                          "yes":
                            actions:
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: Task.MenuLoops < Flow.Repeats
                                  outputs:
                                    "yes":
                                      actions:
                                        - decision:
                                            name: Decision
                                            condition:
                                              exp: Task.MenuLoops == Flow.Repeats
                                            outputs:
                                              "yes":
                                                actions:
                                                  - callTask:
                                                      name: Get Global TTS
                                                      targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                      taskInputs:
                                                        - string:
                                                            name: Task.SystemPrompt
                                                            value:
                                                              lit: Menu_MaxTries
                                                        - boolean:
                                                            name: Task.SystemAudio
                                                            value:
                                                              lit: true
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - string:
                                                            variable: Flow.MenuDestination
                                                            value:
                                                              exp: Flow.OptionDefault
                                                  - loopExit:
                                                      name: Exit Loop
                                              "no":
                                                actions:
                                                  - callTask:
                                                      name: Get Global TTS
                                                      targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                                      taskInputs:
                                                        - string:
                                                            name: Task.SystemPrompt
                                                            value:
                                                              lit: Menu_EntryNotValid
                                                        - boolean:
                                                            name: Task.SystemAudio
                                                            value:
                                                              lit: true
                                                  - loopNext:
                                                      name: Next Loop
                                    "no":
                                      actions:
                                        - callTask:
                                            name: Get Global TTS
                                            targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                            taskInputs:
                                              - string:
                                                  name: Task.SystemPrompt
                                                  value:
                                                    lit: Menu_MaxTries
                                              - boolean:
                                                  name: Task.SystemAudio
                                                  value:
                                                    lit: true
                                        - updateData:
                                            name: Update Data
                                            statements:
                                              - string:
                                                  variable: Flow.MenuDestination
                                                  value:
                                                    exp: Flow.OptionDefault
                                        - loopExit:
                                            name: Exit Loop
                          "no":
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - string:
                                        variable: Flow.MenuDestination
                                        value:
                                          exp: Task.Temp_MenuDestination
                              - loopExit:
                                  name: Exit Loop
          - updateData:
              name: Update Data
              statements:
                - string:
                    variable: Flow.DestinationName
                    value:
                      exp: Flow.MenuDestination
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 50 Distribution
        refId: 50 Distribution_99
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 50 Distribution
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[D06 Destination_1743]"
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - callTask:
                          name: Call Task
                          targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
                  cases:
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "dest"
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[51 LoadBalancing_1872]"
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[52 Priority_156]"
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 52 Priority
        refId: 52 Priority_156
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 52 Priority
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Flow.ACD_Priority)
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - integer:
                              variable: Flow.ACD_Priority
                              value:
                                lit: 0
          - updateData:
              name: Update Data
              statements:
                - integer:
                    variable: Flow.Priority
                    value:
                      exp: Flow.PriorityDNIS + Flow.ACD_Priority
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: "\"ACD_Priority-\" + ToString(Flow.Priority)"
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 60 Recording
        refId: 60 Recording_497
        variables:
          - stringVariable:
              name: Task.RecordingChoice
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 60 Recording
          - decision:
              name: Decision
              condition:
                exp: Flow.RecordingActive
              outputs:
                "yes":
                  actions:
                    - decision:
                        name: Decision
                        condition:
                          exp: Flow.Rec_Consent
                        outputs:
                          "yes":
                            actions:
                              - decision:
                                  name: Decision
                                  condition:
                                    exp: Flow.Recording_OptOut
                                  outputs:
                                    "yes":
                                      actions:
                                        - callTask:
                                            name: Play Audio
                                            targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                            taskInputs:
                                              - string:
                                                  name: Task.SystemPrompt
                                                  value:
                                                    lit: RecordingMenuOptOut
                                              - boolean:
                                                  name: Task.SystemAudio
                                                  value:
                                                    lit: true
                                        - collectInput:
                                            name: Collect Input
                                            inputData:
                                              var: Task.RecordingChoice
                                            digits:
                                              exact: 1
                                            interDigitTimeout:
                                              noValue: true
                                            noEntryTimeout:
                                              lit:
                                                seconds: 5
                                            inputAudio:
                                              exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                            acceptJustStar:
                                              lit: false
                                            acceptJustPound:
                                              lit: false
                                            verificationType: none
                                            outputs:
                                              success:
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.RecordingChoice == "1"
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Recording>1~OptOutYes\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Recorded
                                                                      value:
                                                                        lit: false
                                                        "no":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Recording>D~OptOutNo\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Recorded
                                                                      value:
                                                                        lit: true
                                              failure:
                                                actions:
                                                  - callCommonModule:
                                                      name: Call Common Module
                                                      commonModule:
                                                        RJV Customer Journey:
                                                          ver_latestPublished:
                                                            inputs:
                                                              Common.CustomerJourneyUpdateString:
                                                                exp: "\"Recording>F~OptOutNo\""
                                                              Common.CustomerJourney:
                                                                exp: Flow.CustomerJourney
                                                            outputs:
                                                              Common.CustomerJourneyOutput:
                                                                var: Flow.CustomerJourney
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - boolean:
                                                            variable: Flow.Recorded
                                                            value:
                                                              lit: true
                                    "no":
                                      actions:
                                        - callTask:
                                            name: Get Global TTS
                                            targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                            taskInputs:
                                              - string:
                                                  name: Task.SystemPrompt
                                                  value:
                                                    lit: RecordingMenu
                                              - boolean:
                                                  name: Task.SystemAudio
                                                  value:
                                                    lit: true
                                        - collectInput:
                                            name: Collect Input
                                            inputData:
                                              var: Task.RecordingChoice
                                            digits:
                                              exact: 1
                                            interDigitTimeout:
                                              noValue: true
                                            noEntryTimeout:
                                              lit:
                                                seconds: 5
                                            inputAudio:
                                              exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                            acceptJustStar:
                                              lit: false
                                            acceptJustPound:
                                              lit: false
                                            verificationType: none
                                            outputs:
                                              success:
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.RecordingChoice == "1"
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Recording>1~OptInYes\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Recorded
                                                                      value:
                                                                        lit: true
                                                        "no":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Recording>D~OptInNo\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Recorded
                                                                      value:
                                                                        lit: false
                                              failure:
                                                actions:
                                                  - callCommonModule:
                                                      name: Call Common Module
                                                      commonModule:
                                                        RJV Customer Journey:
                                                          ver_latestPublished:
                                                            inputs:
                                                              Common.CustomerJourneyUpdateString:
                                                                exp: "\"Recording>F~OptInNo\""
                                                              Common.CustomerJourney:
                                                                exp: Flow.CustomerJourney
                                                            outputs:
                                                              Common.CustomerJourneyOutput:
                                                                var: Flow.CustomerJourney
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - boolean:
                                                            variable: Flow.Recorded
                                                            value:
                                                              lit: false
                          "no":
                            actions:
                              - callTask:
                                  name: Get Global TTS
                                  targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                  taskInputs:
                                    - string:
                                        name: Task.SystemPrompt
                                        value:
                                          lit: RecordingInfo
                                    - boolean:
                                        name: Task.SystemAudio
                                        value:
                                          lit: true
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - boolean:
                                        variable: Flow.Recorded
                                        value:
                                          lit: true
                              - callCommonModule:
                                  name: Call Common Module
                                  commonModule:
                                    RJV Customer Journey:
                                      ver_latestPublished:
                                        inputs:
                                          Common.CustomerJourneyUpdateString:
                                            exp: "\"Recording>Yes~NoConsent\""
                                          Common.CustomerJourney:
                                            exp: Flow.CustomerJourney
                                        outputs:
                                          Common.CustomerJourneyOutput:
                                            var: Flow.CustomerJourney
                "no":
                  actions:
                    - callCommonModule:
                        name: Call Common Module
                        commonModule:
                          RJV Customer Journey:
                            ver_latestPublished:
                              inputs:
                                Common.CustomerJourneyUpdateString:
                                  exp: "\"Recording>NotActive\""
                                Common.CustomerJourney:
                                  exp: Flow.CustomerJourney
                              outputs:
                                Common.CustomerJourneyOutput:
                                  var: Flow.CustomerJourney
                    - updateData:
                        name: Update Data
                        statements:
                          - boolean:
                              variable: Flow.Recorded
                              value:
                                lit: false
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Recorded
                    value:
                      exp: Flow.Recorded
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 61 Survey
        refId: 61 Survey_1121
        variables:
          - stringVariable:
              name: Task.SurveyChoice
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - stringVariable:
              name: Task.SurveyChoiceOptOut
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
          - stringVariable:
              name: Task.SurveyFlowNameComplete
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 61 Survey
          - decision:
              name: Decision
              condition:
                exp: Flow.Survey
              outputs:
                "yes":
                  actions:
                    - decision:
                        name: Decision
                        condition:
                          exp: Flow.Survey_Consent
                        outputs:
                          "yes":
                            actions:
                              - decision:
                                  name: OptIn
                                  condition:
                                    exp: Flow.Survey_OptOut
                                  outputs:
                                    "yes":
                                      actions:
                                        - callTask:
                                            name: Get Global TTS
                                            targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                            taskInputs:
                                              - string:
                                                  name: Task.SystemPrompt
                                                  value:
                                                    lit: SurveyMenuOptOut
                                              - boolean:
                                                  name: Task.SystemAudio
                                                  value:
                                                    lit: true
                                        - collectInput:
                                            name: Collect Input
                                            inputData:
                                              var: Task.SurveyChoiceOptOut
                                            digits:
                                              exact: 1
                                            interDigitTimeout:
                                              noValue: true
                                            noEntryTimeout:
                                              lit:
                                                seconds: 5
                                            inputAudio:
                                              exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                            acceptJustStar:
                                              lit: false
                                            acceptJustPound:
                                              lit: false
                                            verificationType: none
                                            outputs:
                                              success:
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.SurveyChoiceOptOut == "1"
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Survey>1~OptOutYes\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - setParticipantData:
                                                                name: Set Participant Data
                                                                attributes:
                                                                  - attribute:
                                                                      name:
                                                                        lit: Survey
                                                                      value:
                                                                        lit: "false"
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Survey
                                                                      value:
                                                                        lit: false
                                                        "no":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Survey>D~OptOutNo\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - setParticipantData:
                                                                name: Set Participant Data
                                                                attributes:
                                                                  - attribute:
                                                                      name:
                                                                        lit: Survey
                                                                      value:
                                                                        lit: "true"
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Survey
                                                                      value:
                                                                        lit: true
                                              failure:
                                                actions:
                                                  - callCommonModule:
                                                      name: Call Common Module
                                                      commonModule:
                                                        RJV Customer Journey:
                                                          ver_latestPublished:
                                                            inputs:
                                                              Common.CustomerJourneyUpdateString:
                                                                exp: "\"Survey>F~OptOutNo\""
                                                              Common.CustomerJourney:
                                                                exp: Flow.CustomerJourney
                                                            outputs:
                                                              Common.CustomerJourneyOutput:
                                                                var: Flow.CustomerJourney
                                                  - setParticipantData:
                                                      name: Set Participant Data
                                                      attributes:
                                                        - attribute:
                                                            name:
                                                              lit: Survey
                                                            value:
                                                              lit: "true"
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - boolean:
                                                            variable: Flow.Survey
                                                            value:
                                                              lit: true
                                    "no":
                                      actions:
                                        - callTask:
                                            name: Get Global TTS
                                            targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                            taskInputs:
                                              - string:
                                                  name: Task.SystemPrompt
                                                  value:
                                                    lit: SurveyMenu
                                              - boolean:
                                                  name: Task.SystemAudio
                                                  value:
                                                    lit: true
                                        - collectInput:
                                            name: Collect Input
                                            inputData:
                                              var: Task.SurveyChoice
                                            digits:
                                              exact: 1
                                            interDigitTimeout:
                                              noValue: true
                                            noEntryTimeout:
                                              lit:
                                                seconds: 5
                                            inputAudio:
                                              exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                            acceptJustStar:
                                              lit: false
                                            acceptJustPound:
                                              lit: false
                                            verificationType: none
                                            outputs:
                                              success:
                                                actions:
                                                  - decision:
                                                      name: Decision
                                                      condition:
                                                        exp: Task.SurveyChoice == "1"
                                                      outputs:
                                                        "yes":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Survey>1~OptInYes\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - setParticipantData:
                                                                name: Set Participant Data
                                                                attributes:
                                                                  - attribute:
                                                                      name:
                                                                        lit: Survey
                                                                      value:
                                                                        lit: "true"
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Survey
                                                                      value:
                                                                        lit: true
                                                        "no":
                                                          actions:
                                                            - callCommonModule:
                                                                name: Call Common Module
                                                                commonModule:
                                                                  RJV Customer Journey:
                                                                    ver_latestPublished:
                                                                      inputs:
                                                                        Common.CustomerJourneyUpdateString:
                                                                          exp: "\"Survey>D~OptInNo\""
                                                                        Common.CustomerJourney:
                                                                          exp: Flow.CustomerJourney
                                                                      outputs:
                                                                        Common.CustomerJourneyOutput:
                                                                          var: Flow.CustomerJourney
                                                            - setParticipantData:
                                                                name: Set Participant Data
                                                                attributes:
                                                                  - attribute:
                                                                      name:
                                                                        lit: Survey
                                                                      value:
                                                                        lit: "false"
                                                            - updateData:
                                                                name: Update Data
                                                                statements:
                                                                  - boolean:
                                                                      variable: Flow.Survey
                                                                      value:
                                                                        lit: false
                                              failure:
                                                actions:
                                                  - callCommonModule:
                                                      name: Call Common Module
                                                      commonModule:
                                                        RJV Customer Journey:
                                                          ver_latestPublished:
                                                            inputs:
                                                              Common.CustomerJourneyUpdateString:
                                                                exp: "\"Survey>F~OptInNo\""
                                                              Common.CustomerJourney:
                                                                exp: Flow.CustomerJourney
                                                            outputs:
                                                              Common.CustomerJourneyOutput:
                                                                var: Flow.CustomerJourney
                                                  - setParticipantData:
                                                      name: Set Participant Data
                                                      attributes:
                                                        - attribute:
                                                            name:
                                                              lit: Survey
                                                            value:
                                                              lit: "false"
                                                  - updateData:
                                                      name: Update Data
                                                      statements:
                                                        - boolean:
                                                            variable: Flow.Survey
                                                            value:
                                                              lit: false
                          "no":
                            actions:
                              - callTask:
                                  name: Get Global TTS
                                  targetTaskRef: "/inboundCall/tasks/task[96 Play Prompt_1252]"
                                  taskInputs:
                                    - string:
                                        name: Task.SystemPrompt
                                        value:
                                          lit: SurveyInfo
                                    - boolean:
                                        name: Task.SystemAudio
                                        value:
                                          lit: true
                              - callCommonModule:
                                  name: Call Common Module
                                  commonModule:
                                    RJV Customer Journey:
                                      ver_latestPublished:
                                        inputs:
                                          Common.CustomerJourneyUpdateString:
                                            exp: "\"Survey>Yes~NoConcent\""
                                          Common.CustomerJourney:
                                            exp: Flow.CustomerJourney
                                        outputs:
                                          Common.CustomerJourneyOutput:
                                            var: Flow.CustomerJourney
                              - setParticipantData:
                                  name: Set Participant Data
                                  attributes:
                                    - attribute:
                                        name:
                                          lit: Survey
                                        value:
                                          lit: "true"
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - boolean:
                                        variable: Flow.Survey
                                        value:
                                          lit: true
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - boolean:
                              variable: Flow.Survey
                              value:
                                lit: false
                    - callCommonModule:
                        name: Call Common Module
                        commonModule:
                          RJV Customer Journey:
                            ver_latestPublished:
                              inputs:
                                Common.CustomerJourneyUpdateString:
                                  exp: "\"Survey>NotActive\""
                                Common.CustomerJourney:
                                  exp: Flow.CustomerJourney
                              outputs:
                                Common.CustomerJourneyOutput:
                                  var: Flow.CustomerJourney
          - decision:
              name: Decision
              condition:
                exp: Flow.Survey
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Task.SurveyFlowNameComplete
                              value:
                                exp: Flow.SurveyFlowName + "_" + Upper(Left(Flow.FlowLanguage, 2))
                    - switch:
                        name: Switch
                        evaluate:
                          firstTrue:
                            default:
                              actions:
                                - setPostFlow:
                                    name: Set Post-Flow
                                    actionType:
                                      voiceSurveyFlow:
                                        targetFlow:
                                          RJV_MenhirVoiceSurvey_NL:
                                            ver_latestPublished:
                                              none: true
                                        invocationData:
                                          noValue: true
                                    target:
                                      lit: caller
                            cases:
                              - case:
                                  value:
                                    exp: Upper(Left(Flow.FlowLanguage, 2)) == "NL"
                                  actions:
                                    - setPostFlow:
                                        name: Set Post-Flow
                                        actionType:
                                          voiceSurveyFlow:
                                            targetFlow:
                                              RJV_MenhirVoiceSurvey_NL:
                                                ver_latestPublished:
                                                  none: true
                                            invocationData:
                                              noValue: true
                                        target:
                                          lit: caller
                              - case:
                                  value:
                                    exp: Upper(Left(Flow.FlowLanguage, 2)) == "EN"
                                  actions:
                                    - setPostFlow:
                                        name: Set Post-Flow
                                        actionType:
                                          voiceSurveyFlow:
                                            targetFlow:
                                              RJV_MenhirVoiceSurvey_EN:
                                                ver_latestPublished:
                                                  none: true
                                            invocationData:
                                              noValue: true
                                        target:
                                          lit: caller
                              - case:
                                  value:
                                    exp: Upper(Left(Flow.FlowLanguage, 2)) == "DE"
                                  actions:
                                    - setPostFlow:
                                        name: Set Post-Flow
                                        actionType:
                                          voiceSurveyFlow:
                                            targetFlow:
                                              RJV_MenhirVoiceSurvey_DE:
                                                ver_latestPublished:
                                                  none: true
                                            invocationData:
                                              noValue: true
                                        target:
                                          lit: caller
                              - case:
                                  value:
                                    exp: Upper(Left(Flow.FlowLanguage, 2)) == "FR"
                                  actions:
                                    - setPostFlow:
                                        name: Set Post-Flow
                                        actionType:
                                          voiceSurveyFlow:
                                            targetFlow:
                                              RJV_MenhirVoiceSurvey_FR:
                                                ver_latestPublished:
                                                  none: true
                                            invocationData:
                                              noValue: true
                                        target:
                                          lit: caller
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: 96 Play Prompt
        refId: 96 Play Prompt_1252
        variables:
          - booleanVariable:
              name: Task.SystemAudio
              initialValue:
                lit: false
              isInput: true
              isOutput: false
          - stringVariable:
              name: Task.SystemPrompt
              initialValue:
                noValue: true
              isInput: true
              isOutput: false
        actions:
          - decision:
              name: Decision
              condition:
                exp: Task.SystemAudio
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Prompt2Search
                              value:
                                exp: Task.SystemPrompt
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Prompt2Search
                              value:
                                exp: Flow.DestinationName
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: "\"PlayPrompt > \" + Flow.Prompt2Search"
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV PlayPrompt DirectTable:
                  ver_latestPublished:
                    inputs:
                      Common.FlowLanguage:
                        exp: Flow.FlowLanguage
                      Common.Prompt2Search:
                        exp: Flow.Prompt2Search + Flow.Prompt_Postfix
                      Common.TablesDivision:
                        exp: Flow.TablesDivision
                    outputs:
                      Common.NextDestination:
                        var: Flow.NextDestination
          - decision:
              name: Decision
              condition:
                exp: Task.SystemAudio
              outputs:
                "yes":
                  actions:
                    - endTask:
                        name: End Task
                        outputPath:
                          name: default
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.NextDestination
                    - jumpToTask:
                        name: Jump to Reusable Task
                        targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: 98 GetQueueAndScriptData
        refId: 98 GetQueueAndScriptData_506
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 98 GetQueueAndScriptData
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setScreenPop:
                          name: Set Screen Pop
                          screenPopScript:
                            RJV Menhir:
                              inputs:
                                AccountNumber:
                                  lit: ""
                                Language:
                                  exp: Flow.FlowLanguage
                                CustomerANI:
                                  exp: Flow.CallerANI
                                Recorded:
                                  exp: Flow.Recorded
                                SurveyScriptInfo:
                                  exp: Flow.Survey
                                ScriptDisplayText:
                                  exp: Flow.ScriptDisplayText
                  cases:
                    - case:
                        value:
                          exp: Flow.Script == "Menhir"
                        actions:
                          - setScreenPop:
                              name: Set Screen Pop
                              screenPopScript:
                                RJV Menhir:
                                  inputs:
                                    AccountNumber:
                                      lit: ""
                                    Language:
                                      exp: Flow.FlowLanguage
                                    CustomerANI:
                                      exp: Flow.CallerANI
                                    Recorded:
                                      exp: Flow.Recorded
                                    SurveyScriptInfo:
                                      exp: Flow.Survey
                                    ScriptDisplayText:
                                      exp: Flow.ScriptDisplayText
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV LastAgentRouting:
                  ver_latestPublished:
                    inputs:
                      Common.LAR:
                        exp: Flow.LAR
                      Common.LARThreshold:
                        exp: Flow.LAR_Threshold
                      Common.ANI:
                        exp: Flow.CallerANI
                    outputs:
                      Common.LARAgentList:
                        var: Flow.LARList
                      Common.LARFound:
                        var: Flow.LARFound
          - jumpToTask:
              name: Jump to Reusable Task
              targetTaskRef: "/inboundCall/tasks/task[99 Transfer2Queue_539]"
    - task:
        name: 99 Transfer2Queue
        refId: 99 Transfer2Queue_539
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 99 Transfer2Queue
                - attribute:
                    name:
                      lit: WhisperText
                    value:
                      exp: Flow.WhisperText + " " + Flow.WhisperLanguage
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Flow.WhisperText)
              outputs:
                "no":
                  actions:
                    - setWhisperAudio:
                        name: Set Whisper Audio
                        whisperAudio:
                          exp: Append(ToAudio(FindUserPrompt(Flow.WhisperText)), ToAudio(FindUserPrompt("WhisperLanguage")))
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: TransferCountry
                    value:
                      exp: Left(Flow.QueueName,2) + "_"
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - decision:
                          name: Decision
                          condition:
                            exp: Flow.LARFound
                          outputs:
                            "yes":
                              actions:
                                - setParticipantData:
                                    name: Set Participant Data
                                    attributes:
                                      - attribute:
                                          name:
                                            lit: ACDRouting
                                          value:
                                            lit: Def
                                - callCommonModule:
                                    name: Call Common Module
                                    commonModule:
                                      RJV Customer Journey:
                                        ver_latestPublished:
                                          inputs:
                                            Common.CustomerJourneyUpdateString:
                                              exp: "\"LARRouting\""
                                            Common.CustomerJourney:
                                              exp: Flow.CustomerJourney
                                          outputs:
                                            Common.CustomerJourneyOutput:
                                              var: Flow.CustomerJourney
                                - transferToAcd:
                                    name: Transfer to ACD with LAR
                                    targetQueue:
                                      exp: FindQueue(Flow.QueueName)
                                    acdSkills:
                                      - acdSkill:
                                          exp: FindSkill(Flow.Skill_1)
                                      - acdSkill:
                                          exp: FindSkill(Flow.Skill_2)
                                    overrideInQueueFlow:
                                      name: RJV Menhir In-Queue New
                                    preTransferAudio:
                                      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                    failureTransferAudio:
                                      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                    priority:
                                      exp: Flow.Priority
                                    preferredAgents:
                                      exp: MakeList(MakeAgentScorePair(FindUserById(Flow.LARList[0]), 100))
                                    languageSkill:
                                      exp: FindLanguageSkill(Flow.LanguageSkill)
                                    directAgent:
                                      noValue: true
                                    failureOutputs:
                                      errorType:
                                        noValue: true
                                      errorMessage:
                                        noValue: true
                            "no":
                              actions:
                                - setParticipantData:
                                    name: Set Participant Data
                                    attributes:
                                      - attribute:
                                          name:
                                            lit: ACDRouting
                                          value:
                                            lit: IQNotFound_Normal_Def
                                - callCommonModule:
                                    name: Call Common Module
                                    commonModule:
                                      RJV Customer Journey:
                                        ver_latestPublished:
                                          inputs:
                                            Common.CustomerJourneyUpdateString:
                                              exp: "\"NormalRouting\""
                                            Common.CustomerJourney:
                                              exp: Flow.CustomerJourney
                                          outputs:
                                            Common.CustomerJourneyOutput:
                                              var: Flow.CustomerJourney
                                - transferToAcd:
                                    name: Transfer to ACD
                                    targetQueue:
                                      exp: FindQueue(Flow.QueueName)
                                    acdSkills:
                                      - acdSkill:
                                          exp: FindSkill(Flow.Skill_1)
                                      - acdSkill:
                                          exp: FindSkill(Flow.Skill_2)
                                    overrideInQueueFlow:
                                      name: RJV Menhir In-Queue New
                                    preTransferAudio:
                                      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                    failureTransferAudio:
                                      exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                    priority:
                                      exp: Flow.Priority
                                    preferredAgents:
                                      noValue: true
                                    languageSkill:
                                      exp: FindLanguageSkill(Flow.LanguageSkill)
                                    directAgent:
                                      noValue: true
                                    failureOutputs:
                                      errorType:
                                        noValue: true
                                      errorMessage:
                                        noValue: true
                  cases:
                    - case:
                        value:
                          exp: Flow.InQueueName == "RJV Menhir In-Queue New"
                        actions:
                          - decision:
                              name: Decision
                              condition:
                                exp: Flow.LARFound
                              outputs:
                                "yes":
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ACDRouting
                                              value:
                                                lit: IQFound_LAR
                                    - callCommonModule:
                                        name: Call Common Module
                                        commonModule:
                                          RJV Customer Journey:
                                            ver_latestPublished:
                                              inputs:
                                                Common.CustomerJourneyUpdateString:
                                                  exp: "\"LARRouting\""
                                                Common.CustomerJourney:
                                                  exp: Flow.CustomerJourney
                                              outputs:
                                                Common.CustomerJourneyOutput:
                                                  var: Flow.CustomerJourney
                                    - transferToAcd:
                                        name: Transfer to ACD with LAR
                                        targetQueue:
                                          exp: FindQueue(Flow.QueueName)
                                        acdSkills:
                                          - acdSkill:
                                              exp: FindSkill(Flow.Skill_1)
                                          - acdSkill:
                                              exp: FindSkill(Flow.Skill_2)
                                        overrideInQueueFlow:
                                          name: RJV Menhir In-Queue New
                                        preTransferAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        failureTransferAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        priority:
                                          exp: Flow.Priority
                                        preferredAgents:
                                          exp: MakeList(MakeAgentScorePair(FindUserById(Flow.LARList[0]), 100))
                                        languageSkill:
                                          exp: FindLanguageSkill(Flow.LanguageSkill)
                                        directAgent:
                                          noValue: true
                                        failureOutputs:
                                          errorType:
                                            noValue: true
                                          errorMessage:
                                            noValue: true
                                "no":
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ACDRouting
                                              value:
                                                lit: IQFound_Normal
                                    - callCommonModule:
                                        name: Call Common Module
                                        commonModule:
                                          RJV Customer Journey:
                                            ver_latestPublished:
                                              inputs:
                                                Common.CustomerJourneyUpdateString:
                                                  exp: "\"NormalRouting\""
                                                Common.CustomerJourney:
                                                  exp: Flow.CustomerJourney
                                              outputs:
                                                Common.CustomerJourneyOutput:
                                                  var: Flow.CustomerJourney
                                    - transferToAcd:
                                        name: Transfer to ACD
                                        targetQueue:
                                          exp: FindQueue(Flow.QueueName)
                                        acdSkills:
                                          - acdSkill:
                                              exp: FindSkill(Flow.Skill_1)
                                          - acdSkill:
                                              exp: FindSkill(Flow.Skill_2)
                                        overrideInQueueFlow:
                                          name: RJV Menhir In-Queue New
                                        preTransferAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        failureTransferAudio:
                                          exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                                        priority:
                                          exp: Flow.Priority
                                        preferredAgents:
                                          noValue: true
                                        languageSkill:
                                          exp: FindLanguageSkill(Flow.LanguageSkill)
                                        directAgent:
                                          noValue: true
                                        failureOutputs:
                                          errorType:
                                            noValue: true
                                          errorMessage:
                                            noValue: true
          - disconnect:
              name: Disconnect
    - task:
        name: B01 Base Flow
        refId: B01 Base Flow_15
        actions:
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[00 Set Tables Division_1801]"
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[01 Initialisation_12]"
          - jumpToTask:
              name: Jump to Reusable Task
              targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: C00 Special Destinations
        refId: C00 Special Destinations_657
        actions:
          - setParticipantData:
              name: Set Participant Data
              attributes:
                - attribute:
                    name:
                      lit: Call_Progress
                    value:
                      lit: 70 Special Destinations
          - callTask:
              name: Call Task
              targetTaskRef: "/inboundCall/tasks/task[D05 Specials_1735]"
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  cases:
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "tran"
                        actions:
                          - setParticipantData:
                              name: Set Participant Data
                              attributes:
                                - attribute:
                                    name:
                                      lit: TransferTo
                                    value:
                                      exp: Flow.DestinationName
                          - transferToNumber:
                              name: Transfer to Number
                              targetNumber:
                                exp: Flow.Transfer_ExternalNumber
                              preTransferAudio:
                                exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                              failureTransferAudio:
                                exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                              releaseLinkTransfer:
                                lit: false
                              connectTimeout:
                                noValue: true
                              failureOutputs:
                                errorType:
                                  noValue: true
                                errorMessage:
                                  noValue: true
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "disc"
                        actions:
                          - decision:
                              name: Decision
                              condition:
                                exp: IsNotSetOrEmpty(Flow.NextDestination)
                              outputs:
                                "yes":
                                  actions:
                                    - disconnect:
                                        name: Disconnect
                                "no":
                                  actions:
                                    - updateData:
                                        name: Update Data
                                        statements:
                                          - string:
                                              variable: Flow.DestinationName
                                              value:
                                                exp: Flow.NextDestination
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "onqa"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[C01 OnQueue Agents_1786]"
                          - updateData:
                              name: Update Data
                              statements:
                                - string:
                                    variable: Flow.DestinationName
                                    value:
                                      exp: Flow.NextDestination
                    - case:
                        value:
                          exp: Lower(Left(Flow.DestinationName, 4)) == "flow"
                        actions:
                          - callTask:
                              name: Call Task
                              targetTaskRef: "/inboundCall/tasks/task[C02 Transfer to Flow_1862]"
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Flow.DestinationName)
              outputs:
                "yes":
                  actions:
                    - disconnect:
                        name: Disconnect
                "no":
                  actions:
                    - jumpToTask:
                        name: Jump to Reusable Task
                        targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
    - task:
        name: C01 OnQueue Agents
        refId: C01 OnQueue Agents_1786
        actions:
          - callData:
              name: Call Data Action
              processingPrompt:
                noValue: true
              timeout:
                lit:
                  minutes: 1
              category:
                RJV  Genesys Cloud Data Actions:
                  dataAction:
                    RJV Get onQueue Agent by QueueId:
                      inputs:
                        QueueID:
                          exp: FindQueue(Flow.QueueNameCheckOnQueue).id
                      successOutputs:
                        onQueueIdle:
                          noValue: true
                        onQueueInteracting:
                          noValue: true
                        onQueueNotResponding:
                          noValue: true
                        onQueueCommunicating:
                          noValue: true
                        onQueueUserCount:
                          var: Flow.AgentsOnQueueTxt
              outputs:
                success:
                  actions:
                    - decision:
                        name: Decision
                        condition:
                          exp: IsNotSetOrEmpty(Flow.AgentsOnQueueTxt)
                        outputs:
                          "yes":
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - integer:
                                        variable: Flow.AgentsOnQueueCount
                                        value:
                                          lit: 0
                          "no":
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - integer:
                                        variable: Flow.AgentsOnQueueCount
                                        value:
                                          exp: ToInt(Flow.AgentsOnQueueTxt)
                failure:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - integer:
                              variable: Flow.AgentsOnQueueCount
                              value:
                                lit: 0
                timeout:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - integer:
                              variable: Flow.AgentsOnQueueCount
                              value:
                                lit: 0
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: "\"OnQueueAgents-Queue-\" + Flow.QueueNameCheckOnQueue + \":\" + ToString(Flow.AgentsOnQueueCount)"
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - decision:
              name: Decision
              condition:
                exp: Flow.AgentsOnQueueCount <= 0
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.NoAgentsOnQueue_Destination
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.DestinationName
                              value:
                                exp: Flow.NextDestination
          - endTask:
              name: End Task
              outputPath:
                name: default
        outputPaths:
          - outputPath:
              name: NoAgentsOnQueue
    - task:
        name: D01 DNIS
        refId: D01 DNIS_1701
        variables:
          - stringVariable:
              name: Task.Voice
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.CalledDNIS
                              dataTable:
                                RJV_Routing_DNIS:
                                  foundOutputs:
                                    Rap_Entry:
                                      var: Flow.Rap_Entry
                                    FirstDestination:
                                      var: Flow.FirstDestination
                                    PriorityDNIS:
                                      var: Flow.PriorityDNIS
                                    LanguageDefault:
                                      var: Flow.LanguageDefault
                                    SkillLine:
                                      var: Flow.SkillLine
                                    NumberActive:
                                      var: Flow.NumberActive
                                    DestinationNotActive:
                                      var: Flow.DestinationNotActive
                                    LanguageSkillDefault:
                                      var: Flow.LanguageSkill
                                    Voice:
                                      var: Task.Voice
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingDNIS - Entry not found: \" + Flow.CalledDNIS"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingDNIS - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - decision:
              name: Decision
              condition:
                exp: IsNotSetOrEmpty(Task.Voice)
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Prompt_Postfix
                              value:
                                exp: "\"\""
                    - setParticipantData:
                        name: Set Participant Data
                        attributes:
                          - attribute:
                              name:
                                lit: Voice
                              value:
                                lit: None
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.Prompt_Postfix
                              value:
                                exp: "\"_\" + Task.Voice"
                    - setParticipantData:
                        name: Set Participant Data
                        attributes:
                          - attribute:
                              name:
                                lit: Voice
                              value:
                                exp: Task.Voice
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: D02 Language
        refId: D02 Language_1705
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.DestinationName
                              dataTable:
                                RJV_Routing_LanguageMenu:
                                  foundOutputs:
                                    Rap_LangMenu:
                                      var: Flow.Rap_LangMenu
                                    PromptMenu:
                                      var: Flow.PromptLangMenu
                                    Repeats:
                                      var: Flow.LangRepeats
                                    Timeout:
                                      var: Flow.LangMenuTimeout
                                    NextDestination:
                                      noValue: true
                                    Option1:
                                      var: Flow.Option1
                                    Rap_Lang1:
                                      var: Flow.Rap_Lang1
                                    Option2:
                                      var: Flow.Option2
                                    Rap_Lang2:
                                      var: Flow.Rap_Lang2
                                    Option3:
                                      var: Flow.Option3
                                    Rap_Lang3:
                                      var: Flow.Rap_Lang3
                                    Option4:
                                      var: Flow.Option4
                                    Rap_Lang4:
                                      var: Flow.Rap_Lang4
                                    Option5:
                                      var: Flow.Option5
                                    Rap_Lang5:
                                      var: Flow.Rap_Lang5
                                    Option9:
                                      var: Flow.Option9
                                    Rap_Lang9:
                                      var: Flow.Rap_Lang9
                                    Default:
                                      var: Flow.OptionDefault
                                    Option1_LangSkill:
                                      var: Flow.Option1_LangSkill
                                    Option2_LangSkill:
                                      var: Flow.Option2_LangSkill
                                    Option3_LangSkill:
                                      var: Flow.Option3_LangSkill
                                    Option4_LangSkill:
                                      var: Flow.Option4_LangSkill
                                    Option5_LangSkill:
                                      var: Flow.Option5_LangSkill
                                    Option9_LangSkill:
                                      var: Flow.Option9_LangSkill
                                    Default_LangSkill:
                                      var: Flow.Default_LangSkill
                                    Option1_Destination:
                                      var: Flow.NextDestinationLanguageOpt1
                                    Option2_Destination:
                                      var: Flow.NextDestinationLanguageOpt2
                                    Option3_Destination:
                                      var: Flow.NextDestinationLanguageOpt3
                                    Option4_Destination:
                                      var: Flow.NextDestinationLanguageOpt4
                                    Option5_Destination:
                                      var: Flow.NextDestinationLanguageOpt5
                                    Option9_Destination:
                                      var: Flow.NextDestinationLanguageOpt9
                                    Defaut_Destination:
                                      var: Flow.NextDestinationLanguageDefault
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingLanguageMenu - Entry not found: \" + Flow.DestinationName"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingLanguageMenu - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: D03 Scheduling
        refId: D03 Scheduling_1712
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.DestinationName
                              dataTable:
                                RJV_Routing_Scheduling:
                                  foundOutputs:
                                    Rap_Entry:
                                      var: Flow.ScheduleRap_Entry
                                    EmergencyGroup:
                                      var: Flow.EmergencyGroup
                                    NextDestination:
                                      var: Flow.NextDestination
                                    DestinationClosed:
                                      var: Flow.DestinationClosed
                                    DestinationHoliday:
                                      var: Flow.DestinationHoliday
                                    DestinationEmergency:
                                      var: Flow.DestinationEmergency
                                    ScheduleGroup:
                                      var: Flow.ScheduleGroup
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingScheduling - Entry not found: \" + Flow.DestinationName"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingScheduling - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: D04 Menu
        refId: D04 Menu_1727
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.DestinationName
                              dataTable:
                                RJV_Routing_Menu:
                                  foundOutputs:
                                    Rap_Menu:
                                      var: Flow.Rap_Menu
                                    PromptMenu:
                                      var: Flow.PromptMenu
                                    Repeats:
                                      var: Flow.Repeats
                                    Timeout:
                                      var: Flow.Timeout
                                    Option1:
                                      var: Flow.Option1
                                    Rap_Opt1:
                                      var: Flow.Rap_Opt1
                                    Option2:
                                      var: Flow.Option2
                                    Rap_Opt2:
                                      var: Flow.Rap_Opt2
                                    Option3:
                                      var: Flow.Option3
                                    Rap_Opt3:
                                      var: Flow.Rap_Opt3
                                    Option4:
                                      var: Flow.Option4
                                    Rap_Opt4:
                                      var: Flow.Rap_Opt4
                                    Option5:
                                      var: Flow.Option5
                                    Rap_Opt5:
                                      var: Flow.Rap_Opt5
                                    Option6:
                                      var: Flow.Option6
                                    Rap_Opt6:
                                      var: Flow.Rap_Opt6
                                    Option7:
                                      var: Flow.Option7
                                    Rap_Opt7:
                                      var: Flow.Rap_Opt7
                                    Option8:
                                      var: Flow.Option8
                                    Rap_Opt8:
                                      var: Flow.Rap_Opt8
                                    Option9:
                                      var: Flow.Option9
                                    Rap_Opt9:
                                      var: Flow.Rap_Opt9
                                    Option0:
                                      var: Flow.Option0
                                    Rap_Opt0:
                                      var: Flow.Rap_Opt0
                                    "Option#":
                                      var: Flow.OptionHash
                                    "Rap_Opt#":
                                      var: Flow.Rap_OptHash
                                    Option*:
                                      var: Flow.OptionStar
                                    Rap_Opt*:
                                      var: Flow.Rap_OptStar
                                    Default:
                                      var: Flow.OptionDefault
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingMenu - Entry not found: \" + Flow.DestinationName"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingMenu - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: D05 Specials
        refId: D05 Specials_1735
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.DestinationName
                              dataTable:
                                RJV_Routing_Specialties:
                                  foundOutputs:
                                    Rap_SpecDest:
                                      var: Flow.Rap_SpecDest
                                    NextDestination:
                                      var: Flow.NextDestination
                                    Transfer_ExternalNumber:
                                      var: Flow.Transfer_ExternalNumber
                                    Dest_Default:
                                      var: Flow.Dest_Default
                                    QueueNameCheckOnQueue:
                                      var: Flow.QueueNameCheckOnQueue
                                    NoAgentsOnQueue_Destination:
                                      var: Flow.NoAgentsOnQueue_Destination
                                    Transfer_FlowName:
                                      var: Flow.Transfer_FlowName
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                found:
                                  actions:
                                    - callCommonModule:
                                        name: Call Common Module
                                        commonModule:
                                          RJV Customer Journey:
                                            ver_latestPublished:
                                              inputs:
                                                Common.CustomerJourneyUpdateString:
                                                  exp: Flow.Rap_SpecDest
                                                Common.CustomerJourney:
                                                  exp: Flow.CustomerJourney
                                              outputs:
                                                Common.CustomerJourneyOutput:
                                                  var: Flow.CustomerJourney
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingSpecialties - Entry not found: \" + Flow.DestinationName"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingSpecialties - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: D06 Destination
        refId: D06 Destination_1743
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Data Table Switch Task (Do1 DNIS) - Division: \" + Flow.TablesDivision + \" not found\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.TablesDivision == "RJV"
                        actions:
                          - dataTableLookup:
                              name: Data Table Lookup
                              lookupValue:
                                exp: Flow.DestinationName
                              dataTable:
                                RJV_Routing_Destination:
                                  foundOutputs:
                                    Rap_Dest:
                                      var: Flow.Rap_Dest
                                    QueueName:
                                      var: Flow.QueueName
                                    In-Queue:
                                      var: Flow.InQueueName
                                    Skill_1:
                                      var: Flow.Skill_1
                                    Skill_2:
                                      var: Flow.Skill_2
                                    Priority:
                                      var: Flow.ACD_Priority
                                    Script:
                                      var: Flow.Script
                                    Recording:
                                      var: Flow.RecordingActive
                                    Rec_Consent:
                                      var: Flow.Rec_Consent
                                    Recording_OptOut:
                                      var: Flow.Recording_OptOut
                                    OfferCallback:
                                      var: Flow.OfferCallback
                                    CallbackEwtThreshold:
                                      var: Flow.CallbackEwtThreshold
                                    LAR:
                                      var: Flow.LAR
                                    LAR_Threshold:
                                      var: Flow.LAR_Threshold
                                    Survey:
                                      var: Flow.Survey
                                    Survey_Consent:
                                      var: Flow.Survey_Consent
                                    Survey_OptOut:
                                      var: Flow.Survey_OptOut
                                    WhisperText:
                                      var: Flow.WhisperText
                                    ScriptDisplayText:
                                      var: Flow.ScriptDisplayText
                                    ScriptDisplayText2:
                                      var: Flow.ScriptDisplayText2
                                    SurveyFlowName:
                                      var: Flow.SurveyFlowName
                                    LoadBalancePercentage:
                                      var: Flow.LoadBalancePercentage
                                    LoadBalanceDestination:
                                      var: Flow.LoadBalanceDestination
                                  failureOutputs:
                                    errorType:
                                      noValue: true
                                    errorMessage:
                                      noValue: true
                              outputs:
                                notFound:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingDestination - Entry not found: \" + Flow.DestinationName"
                                    - disconnect:
                                        name: Disconnect
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Data Table RoutingDestination - Failure\""
                                    - disconnect:
                                        name: Disconnect
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: C02 Transfer to Flow
        refId: C02 Transfer to Flow_1862
        actions:
          - switch:
              name: Switch
              evaluate:
                firstTrue:
                  default:
                    actions:
                      - setParticipantData:
                          name: Set Participant Data
                          attributes:
                            - attribute:
                                name:
                                  lit: ERROR_Disconnect
                                value:
                                  exp: "\"Transfer To Flow - Flow (\" + Flow.Transfer_FlowName + \") not found or configured in task C02 Transfer to Flow\""
                      - disconnect:
                          name: Disconnect
                  cases:
                    - case:
                        value:
                          exp: Flow.Transfer_FlowName == "RJV_TransferToFlowExample"
                        actions:
                          - callCommonModule:
                              name: Call Common Module
                              commonModule:
                                RJV Customer Journey:
                                  ver_latestPublished:
                                    inputs:
                                      Common.CustomerJourneyUpdateString:
                                        exp: "\"Transferred to flow \" + Flow.Transfer_FlowName"
                                      Common.CustomerJourney:
                                        exp: Flow.CustomerJourney
                                    outputs:
                                      Common.CustomerJourneyOutput:
                                        var: Flow.CustomerJourney
                          - transferToFlow:
                              name: Transfer to Flow
                              targetFlow:
                                name: RJV_TransferToFlowExample
                              preTransferAudio:
                                exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                              failureTransferAudio:
                                exp: AudioPlaybackOptions(ToAudioBlank(100), true)
                              failureOutputs:
                                errorType:
                                  noValue: true
                                errorMessage:
                                  noValue: true
                              outputs:
                                failure:
                                  actions:
                                    - setParticipantData:
                                        name: Set Participant Data
                                        attributes:
                                          - attribute:
                                              name:
                                                lit: ERROR_Disconnect
                                              value:
                                                exp: "\"Transfer To Flow - Failure transferring to flow \" + Flow.Transfer_FlowName"
                                    - disconnect:
                                        name: Disconnect
    - task:
        name: 51 LoadBalancing
        refId: 51 LoadBalancing_1872
        variables:
          - stringVariable:
              name: Task.LB_CustomerJourney
              initialValue:
                noValue: true
              isInput: false
              isOutput: false
        actions:
          - decision:
              name: Decision
              condition:
                exp: Flow.LoadBalancePercentage == 0 or Flow.LoadBalancePercentage == 100
              outputs:
                "yes":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Task.LB_CustomerJourney
                              value:
                                lit: Loadbalancing Off
                "no":
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - integer:
                              variable: Flow.LB_Randomizer
                              value:
                                exp: RandomInt(99) + 1
                    - decision:
                        name: Decision
                        condition:
                          exp: Flow.LB_Randomizer <= Flow.LoadBalancePercentage
                        outputs:
                          "yes":
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - string:
                                        variable: Task.LB_CustomerJourney
                                        value:
                                          exp: "\"LoadBalancing base %: \" + ToString(Flow.LoadBalancePercentage) + \" - LB_Calc: \" + ToString(Flow.LB_Randomizer) + \" - Original Queue\""
                          "no":
                            actions:
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - string:
                                        variable: Task.LB_CustomerJourney
                                        value:
                                          exp: "\"LoadBalancing: base% = \" + ToString(Flow.LoadBalancePercentage) + \" _ LB_Calc = \" + ToString(Flow.LB_Randomizer) + \" - LoadBalancing Queue\""
                              - updateData:
                                  name: Update Data
                                  statements:
                                    - string:
                                        variable: Flow.DestinationName
                                        value:
                                          exp: Flow.LoadBalanceDestination
                              - callCommonModule:
                                  name: Call Common Module
                                  commonModule:
                                    RJV Customer Journey:
                                      ver_latestPublished:
                                        inputs:
                                          Common.CustomerJourneyUpdateString:
                                            exp: Task.LB_CustomerJourney
                                          Common.CustomerJourney:
                                            exp: Flow.CustomerJourney
                                        outputs:
                                          Common.CustomerJourneyOutput:
                                            var: Flow.CustomerJourney
                              - jumpToTask:
                                  name: Jump to Reusable Task
                                  targetTaskRef: "/inboundCall/tasks/task[20 Destination_52]"
          - callCommonModule:
              name: Call Common Module
              commonModule:
                RJV Customer Journey:
                  ver_latestPublished:
                    inputs:
                      Common.CustomerJourneyUpdateString:
                        exp: Task.LB_CustomerJourney
                      Common.CustomerJourney:
                        exp: Flow.CustomerJourney
                    outputs:
                      Common.CustomerJourneyOutput:
                        var: Flow.CustomerJourney
          - endTask:
              name: End Task
              outputPath:
                name: default
